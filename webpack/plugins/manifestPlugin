const _ = require("lodash");
const fs = require("fs");
const path = require("path");

function ManifestPlugin(options) {
	this.options = _.merge({}, {
		path: ".",
		filename: "manifest.json"
	}, options);
}

ManifestPlugin.prototype.apply = function(compiler) {
	compilation.plugin("done", function(stats) {
		fs.readFile(path.join(options.path, options.filename), function(err, manifest) {
			// Create new manifest
			if (err) {
				// const output = { };
				// fs.writeFile(JSON.stringify(output));
			}
			
			// Manifest already exists
			console.log(stats.toJson());
		});
    });
}
